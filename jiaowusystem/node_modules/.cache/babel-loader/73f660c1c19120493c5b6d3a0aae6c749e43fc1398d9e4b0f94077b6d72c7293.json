{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport _imports_0 from '@/assets/2.jpg';\nconst _hoisted_1 = {\n  class: \"change_personal_info\"\n};\nconst _hoisted_2 = {\n  class: \"user-info\"\n};\nconst _hoisted_3 = {\n  class: \"card-container\"\n};\nconst _hoisted_4 = {\n  class: \"avatar-container\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"button-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n    default: _withCtx(() => [_createVNode(_component_el_header, null, {\n      default: _withCtx(() => [_cache[2] || (_cache[2] = _createElementVNode(\"img\", {\n        src: _imports_0,\n        alt: \"Icon\",\n        class: \"badge\"\n      }, null, -1 /* HOISTED */)), _cache[3] || (_cache[3] = _createElementVNode(\"h3\", {\n        style: {\n          \"margin-right\": \"auto\"\n        }\n      }, \"某某学校教师端——修改个人信息页面\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h3\", null, \"账号：\" + _toDisplayString($data.change_info.user_account), 1 /* TEXT */), _createElementVNode(\"h3\", null, \"ID: \" + _toDisplayString($data.change_info.user_id), 1 /* TEXT */)]), _createVNode(_component_el_button, {\n        type: \"danger\",\n        style: {\n          \"float\": \"right\"\n        },\n        onClick: $options.goToTeacherHome\n      }, {\n        default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"返回\")])),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_main, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n        src: $data.change_info.avatar,\n        alt: \"头像\",\n        class: \"avatar\"\n      }, null, 8 /* PROPS */, _hoisted_5), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n        class: \"avatar-label\"\n      }, \"教师头像\", -1 /* HOISTED */)), _createVNode(_component_el_upload, {\n        class: \"upload-avatar\",\n        \"before-upload\": $options.handleAvatarUpload,\n        \"show-file-list\": false\n      }, {\n        trigger: _withCtx(() => [_createVNode(_component_el_button, {\n          size: \"large\",\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"点击上传头像\")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"before-upload\"])]), _createVNode(_component_el_card, {\n        style: {\n          \"max-width\": \"800px\"\n        },\n        class: \"tch_change_personal_box-card\"\n      }, {\n        header: _withCtx(() => _cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n          class: \"card-header\"\n        }, [_createElementVNode(\"span\", null, \"个人信息\")], -1 /* HOISTED */)])),\n        footer: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $options.saveInfo,\n          style: {\n            \"margin-right\": \"100px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"保存信息\")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          onClick: _cache[0] || (_cache[0] = $event => $options.resetForm('change_info'))\n        }, {\n          default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"撤销\")])),\n          _: 1 /* STABLE */\n        })])]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          ref: \"change_info\",\n          model: $data.change_info,\n          rules: $data.rules,\n          \"status-icon\": \"\"\n        }, {\n          default: _withCtx(() => [_createCommentVNode(\" 其他表单项 \")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n        _: 1 /* STABLE */\n      })])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","default","_withCtx","_component_el_header","_createElementVNode","src","alt","style","_hoisted_2","_toDisplayString","$data","change_info","user_account","user_id","_component_el_button","type","onClick","$options","goToTeacherHome","_cache","_createTextVNode","_","_component_el_main","_hoisted_3","_hoisted_4","avatar","_hoisted_5","_component_el_upload","handleAvatarUpload","trigger","size","_component_el_card","header","footer","_hoisted_6","saveInfo","$event","resetForm","_component_el_form","ref","model","rules","_createCommentVNode"],"sources":["D:\\vue_project\\test_project\\jiaowusystem\\src\\views\\main\\tch_change_personal_info.vue"],"sourcesContent":["<template>\r\n  <div class=\"change_personal_info\">\r\n    <el-container>\r\n      <el-header>\r\n        <img src=\"@/assets/2.jpg\" alt=\"Icon\" class=\"badge\">\r\n        <h3 style=\"margin-right: auto;\">某某学校教师端——修改个人信息页面</h3>\r\n        <div class=\"user-info\">\r\n          <h3>账号：{{ change_info.user_account }}</h3>\r\n          <h3>ID: {{ change_info.user_id }}</h3>\r\n        </div>\r\n        <el-button type=\"danger\" style=\"float: right;\" @click=\"goToTeacherHome\">返回</el-button>\r\n      </el-header>\r\n      <el-main>\r\n        <div class=\"card-container\">\r\n          <div class=\"avatar-container\">\r\n            <img :src=\"change_info.avatar\" alt=\"头像\" class=\"avatar\">  \r\n            <div class=\"avatar-label\">教师头像</div>\r\n            <el-upload\r\n              class=\"upload-avatar\"\r\n              :before-upload=\"handleAvatarUpload\"\r\n              :show-file-list=\"false\"\r\n            >\r\n              <template v-slot:trigger>\r\n                <el-button size=\"large\" type=\"primary\">点击上传头像</el-button>\r\n              </template>\r\n            </el-upload>\r\n          </div>\r\n          <el-card style=\"max-width: 800px\" class=\"tch_change_personal_box-card\">  \r\n            <template #header>  \r\n              <div class=\"card-header\">  \r\n                <span>个人信息</span>  \r\n              </div>  \r\n            </template>\r\n            <el-form ref=\"change_info\" :model=\"change_info\" :rules=\"rules\" status-icon>  \r\n              <!-- 其他表单项 -->\r\n            </el-form>  \r\n            <template #footer>  \r\n              <div class=\"button-container\">  \r\n                <el-button type=\"primary\" @click=\"saveInfo\" style=\"margin-right: 100px;\">保存信息</el-button>  \r\n                <el-button @click=\"resetForm('change_info')\">撤销</el-button>  \r\n              </div>  \r\n            </template>  \r\n          </el-card>\r\n        </div> \r\n      </el-main>  \r\n    </el-container>  \r\n  </div>  \r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      change_info: {\r\n        user_id: \"\",\r\n        name: \"古镇的卡布拉\", // 学生姓名示例\r\n        sex: \"男\", // 学生性别示例\r\n        college: \"软件工程\",\r\n        tel: \"13668986213\",\r\n        user_account: \"\",\r\n        password: \"1\",\r\n        new_password: \"1\",\r\n        confirm_password: \"1\",\r\n        avatar: require('@/assets/logo.png'), // 默认头像路径\r\n      },\r\n      options: [\r\n        { value: '软件工程学院', label: '软件工程学院' },\r\n        { value: '计算机学院', label: '计算机学院' },\r\n        { value: '数学学院', label: '数学学院' },\r\n        { value: '物理学院', label: '物理学院' },\r\n        { value: '大气学院', label: '大气学院' },\r\n        { value: '政务学院', label: '政务学院' },\r\n        { value: '海工学院', label: '海工学院' }\r\n      ],\r\n      rules: {\r\n        college: [\r\n          { required: true, message: \"请选择学院\", trigger: 'blur' }\r\n        ],\r\n        tel: [\r\n          { required: true, message: \"请输入电话\", trigger: 'blur' }\r\n        ],\r\n        new_password: [\r\n          { required: true, message: \"请输入新密码\", trigger: 'blur' }\r\n        ],\r\n        confirm_password: [\r\n          { required: true, message: \"请确认密码\", trigger: 'blur' },\r\n          { validator: this.validateConfirmPassword, trigger: 'blur' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleAvatarUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg';\r\n      const isPNG = file.type === 'image/png';\r\n      const isLimitSize = file.size / 1024 / 1024 < 5; // 限制为5MB以内\r\n\r\n      if (!isJPG && !isPNG) {\r\n        this.$message.error('上传头像只能是 JPG/PNG 格式!');\r\n        return false;\r\n      }\r\n      if (!isLimitSize) {\r\n        this.$message.error('上传头像大小不能超过 5MB!');\r\n        return false;\r\n      }\r\n\r\n      // 模拟上传成功，直接更新头像 URL\r\n      const avatarURL = URL.createObjectURL(file);\r\n      this.change_info.avatar = avatarURL;\r\n      this.$message.success('头像上传成功！');\r\n      \r\n      // 阻止默认上传行为\r\n      return false;\r\n    },\r\n    validateConfirmPassword(rule, value, callback) {\r\n      if (value !== this.change_info.new_password) {\r\n        callback(new Error(\"两次输入的密码不一致\"));\r\n      } else {\r\n        callback();\r\n      }\r\n    },\r\n    goToTeacherHome() {\r\n      this.$router.go(-1);\r\n    },\r\n    saveInfo() {\r\n      console.log('信息已保存', this.change_info);\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='stylus' scoped>\r\nhtml, body {\r\n  height: 100%;\r\n  margin: 0;\r\n  overflow: hidden; /* 隐藏body的滚动条 */\r\n}\r\n\r\n.change_personal_info {\r\n  height: 100%;\r\n  overflow-y: auto; /* 允许垂直滚动 */\r\n}\r\n\r\n.el-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n}\r\n\r\n.el-header {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: var(--el-color-primary-light-3);\r\n  color: black;\r\n  height: 12%;\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 20px;\r\n}\r\n\r\n.avatar-container {\r\n  text-align: center;\r\n  margin-top: 50px;\r\n}\r\n\r\n.avatar {\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}